import os
import sys
import re



def main():
    obfuscated_file_path = ""
    obfus_ptn = re.compile("\^<#(\w+)#\^>")

    with open("layer1_obfuscation.txt", "r") as fr:
        buff = fr.read()

    matches = re.findall(obfus_ptn, buff)

    if matches:
        clean_buff = buff
        
                  
    for m in matches:
        ## generate the garbage code to remove
        garbage_code = "^<#" + m + "#^>"
        clean_buff = clean_buff.replace(garbage_code, "")

    with open("layer1_deobfus.txt", "a") as fw:
        fw.write(clean_buff)
    print("code was cleaned!!")
          
        
    return


if __name__ == "__main__":
    main()
